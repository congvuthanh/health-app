# Health-App

A responsive health tracking web application built with React and TypeScript, featuring authentication, health metrics visualization, and meal tracking.

## ğŸ“‘ Table of Contents

- [ğŸ“‹ Overview](#-overview)
- [ğŸš€ Technology Stack](#-technology-stack)
- [ğŸ“ Project Structure](#-project-structure)
- [ğŸ”‘ Key Features](#-key-features)
  - [Authentication & Authorization](#authentication--authorization)
  - [Dashboard (My Page)](#dashboard-my-page)
  - [User Interface](#user-interface)
  - [Developer Experience](#developer-experience)
- [ğŸƒâ€â™‚ï¸ Getting Started](#ï¸-getting-started)
- [ğŸ—ºï¸ Application Routes](#ï¸-application-routes)
- [ğŸŒ API Integration](#-api-integration)
- [ğŸ“± Responsive Design](#-responsive-design)
- [ğŸ¨ Design System](#-design-system)
- [ğŸ§ª Testing Strategy](#-testing-strategy)
- [ğŸ”’ Authentication Flow](#-authentication-flow)
- [ğŸ”’ Security Considerations](#-security-considerations)
- [ğŸ“ Development Guidelines](#-development-guidelines)
- [ğŸ¤ Contributing](#-contributing)

## ğŸ“‹ Overview

Health-App is a modern, full-featured web application designed to help users monitor and track their health journey. The application provides an intuitive interface for managing daily health metrics, meal records, and personal achievements, making it easier for users to maintain healthy habits and visualize their progress over time.

### What It Does

The application serves as a comprehensive health dashboard where users can:

- **Track Health Metrics:** Monitor weight and body fat percentage over time with interactive charts and customizable time periods (daily, weekly, monthly, yearly views)
- **Record Meals:** Document and organize meals with photos, categorized by type (Breakfast, Lunch, Dinner, Snack) with infinite scrolling for easy browsing
- **View Achievements:** Track daily progress with visual indicators showing achievement rates and motivational insights
- **Stay Informed:** Receive notifications and updates through an integrated notification system
- **Manage Account:** Secure authentication with password-based login and session management

### Key Highlights

- **ğŸ¯ User-Centric Design:** Clean, modern interface optimized for both desktop and mobile devices with responsive layouts
- **ğŸ“Š Data Visualization:** Interactive charts powered by Recharts provide clear insights into health trends
- **âš¡ Performance Optimized:** Leverages React Query for efficient data caching, background updates, and optimistic UI updates
- **ğŸ”’ Secure:** JWT-based authentication with protected routes and automatic token management
- **â™¿ Accessible:** WCAG AA compliant with keyboard navigation and screen reader support
- **ğŸ§ª Well-Tested:** Comprehensive test coverage (80%+) ensuring reliability and maintainability

### Target Users

This application is ideal for:

- Individuals looking to maintain a healthy lifestyle with structured tracking
- Health-conscious users who want to monitor their progress visually
- Anyone seeking an intuitive, mobile-friendly health tracking solution

### Technical Excellence

Built with modern web technologies and best practices, Health-App demonstrates:

- Type-safe development with TypeScript and auto-generated API types
- Robust state management using React Query and Context API
- Component-driven architecture with reusable, testable components
- Automated API integration with OpenAPI schema and Orval code generation
- Comprehensive testing strategy with unit, integration, and API mocking

## ğŸš€ Technology Stack

- **Framework:** React 19 with TypeScript
- **Routing:** React Router v7
- **Build Tool:** Vite (with Rolldown)
- **Data Fetching:** React Query (TanStack Query v5)
- **Form Management:** React Hook Form with Zod validation
- **Styling:** styled-components v6
- **Charts:** Recharts v3
- **Testing:** Vitest with React Testing Library (80%+ coverage target)
- **State Management:** React Query + React Context (AuthContext)
- **API Integration:**
  - REST API with OpenAPI schema
  - Orval for type generation
  - Axios for HTTP client
  - MSW for API mocking in tests
- **Code Quality:**
  - ESLint for linting
  - Prettier for code formatting
  - TypeScript for type safety

## ğŸ“ Project Structure

```
health-app/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ api/                    # API layer (see /src/api/README.md)
â”‚   â”‚   â”œâ”€â”€ client.ts           # Axios client with auth interceptor
â”‚   â”‚   â”œâ”€â”€ schemas/            # OpenAPI schema (api.swagger.json)
â”‚   â”‚   â”œâ”€â”€ generated/          # Auto-generated by Orval
â”‚   â”‚   â”‚   â”œâ”€â”€ default/        # React Query hooks & MSW handlers
â”‚   â”‚   â”‚   â””â”€â”€ schemas/        # Zod schemas & TypeScript types
â”‚   â”‚   â”œâ”€â”€ index.ts            # API exports
â”‚   â”‚   â””â”€â”€ README.md           # API documentation
â”‚   â”‚
â”‚   â”œâ”€â”€ assets/                 # Static assets
â”‚   â”‚   â””â”€â”€ icons/              # SVG icons (15 icon files)
â”‚   â”‚
â”‚   â”œâ”€â”€ components/             # Reusable components
â”‚   â”‚   â”œâ”€â”€ common/             # Generic shared components
â”‚   â”‚   â”‚   â””â”€â”€ ScrollToTop/    # Scroll to top button
â”‚   â”‚   â””â”€â”€ layout/             # Layout components
â”‚   â”‚       â”œâ”€â”€ Header/         # Header with navigation & auth
â”‚   â”‚       â”œâ”€â”€ Footer/         # Footer with links
â”‚   â”‚       â””â”€â”€ Layout/         # Main layout wrapper
â”‚   â”‚
â”‚   â”œâ”€â”€ contexts/               # React contexts
â”‚   â”‚   â””â”€â”€ AuthContext/        # Authentication context & provider
â”‚   â”‚
â”‚   â”œâ”€â”€ constants/              # Application constants
â”‚   â”‚   â””â”€â”€ myPage.ts           # MyPage-specific constants
â”‚   â”‚
â”‚   â”œâ”€â”€ data/                   # Static data
â”‚   â”‚   â”œâ”€â”€ headerMenuItems.ts  # Header navigation items
â”‚   â”‚   â”œâ”€â”€ footerMenuItems.ts  # Footer navigation items
â”‚   â”‚   â””â”€â”€ durationOptions.ts  # Health record duration options
â”‚   â”‚
â”‚   â”œâ”€â”€ hooks/                  # Custom React Query hooks
â”‚   â”‚   â”œâ”€â”€ useAuthMutation.ts  # Login mutation
â”‚   â”‚   â”œâ”€â”€ useTokenValidation.ts # Token validation
â”‚   â”‚   â”œâ”€â”€ useAchievement.ts   # Achievement data
â”‚   â”‚   â”œâ”€â”€ useHealthRecords.ts # Health records with duration filter
â”‚   â”‚   â”œâ”€â”€ useMealRecords.ts   # Meal records with infinite scroll
â”‚   â”‚   â”œâ”€â”€ useNotifications.ts # Notification data
â”‚   â”‚   â””â”€â”€ useAppNavigate.ts   # Navigation helper
â”‚   â”‚
â”‚   â”œâ”€â”€ pages/                  # Page components
â”‚   â”‚   â”œâ”€â”€ TopPage/            # Login page (/)
â”‚   â”‚   â”‚   â”œâ”€â”€ index.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ index.styles.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ index.test.tsx
â”‚   â”‚   â”‚   â””â”€â”€ schema.ts       # Zod validation schema
â”‚   â”‚   â”œâ”€â”€ MyPage/             # Dashboard (/myPage)
â”‚   â”‚   â”‚   â”œâ”€â”€ index.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ index.styles.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ index.test.tsx
â”‚   â”‚   â”‚   â””â”€â”€ components/     # Page-specific components
â”‚   â”‚   â”‚       â”œâ”€â”€ AchievementSection/
â”‚   â”‚   â”‚       â”œâ”€â”€ HealthRecordSection/
â”‚   â”‚   â”‚       â””â”€â”€ MealRecordsSection/
â”‚   â”‚   â”œâ”€â”€ AuthFailedPage/     # Auth error (/authenticationError)
â”‚   â”‚   â””â”€â”€ NotFoundPage/       # 404 page
â”‚   â”‚
â”‚   â”œâ”€â”€ routes/                 # Routing configuration
â”‚   â”‚   â”œâ”€â”€ index.tsx           # Router setup
â”‚   â”‚   â””â”€â”€ path.ts             # Route paths
â”‚   â”‚
â”‚   â”œâ”€â”€ styles/                 # Global styles & theme system
â”‚   â”‚   â”œâ”€â”€ GlobalStyles.tsx    # Global CSS styles
â”‚   â”‚   â”œâ”€â”€ theme.ts            # Theme configuration
â”‚   â”‚   â””â”€â”€ styled.d.ts         # styled-components type definitions
â”‚   â”‚
â”‚   â””â”€â”€ utils/                  # Utility functions
â”‚       â”œâ”€â”€ pxToRem.ts          # Pixel to rem converter
â”‚       â””â”€â”€ test/               # Test utilities
â”‚           â”œâ”€â”€ test-utils.tsx  # Custom render with providers
â”‚           â”œâ”€â”€ mockData.ts     # Mock data generators
â”‚           â”œâ”€â”€ server.ts       # MSW server setup
â”‚           â””â”€â”€ index.ts        # Test exports
```

> **Note:** Each component and page folder follows a consistent structure with `index.tsx`, `index.styles.ts`, and `index.test.tsx` files.

## ğŸ”‘ Key Features

### Authentication & Authorization

- Password-based authentication with JWT tokens
- Secure token storage and management
- Protected routes with authentication checks
- Auto-redirect on authentication status changes
- Logout functionality with session cleanup

### Dashboard (My Page)

- **Achievement Section:** Circular progress indicator showing daily achievement rate with meal image background
- **Health Records:** Interactive line chart with weight and body fat percentage tracking
  - Filter by duration: Day, Week, Month, Year
  - Smooth animations and responsive chart rendering
  - Data caching for optimal performance
- **Meal Records:** Infinite scrolling grid of meal entries
  - Lazy loading with intersection observer
  - Image optimization with lazy loading
  - Categorized by meal type (Breakfast, Lunch, Dinner, Snack)

### User Interface

- Responsive design across all devices (mobile 415px, tablet 851px, desktop 1440px)
- Smooth scroll-to-top button on all pages
- Header with navigation and notifications badge
- Fixed footer with important links
- Loading states and skeleton screens
- Error handling with retry functionality
- Accessibility-focused (WCAG AA compliant)

### Developer Experience

- Type-safe API integration with auto-generated types
- Form validation with React Hook Form and Zod
- Comprehensive test coverage (80%+)
- Hot module replacement for fast development
- Consistent code formatting and linting

## ğŸƒâ€â™‚ï¸ Getting Started

1. **Prerequisites**
   - Node.js (v22 or higher)
   - pnpm (v8 or higher)

2. **Installation**

   ```bash
   # Clone the repository
   git clone [repository-url]
   cd health-app

   # Install dependencies
   pnpm install
   ```

3. **Development**

   ```bash
   # Start development server
   pnpm dev

   # Build for production
   pnpm build

   # Preview production build
   pnpm preview

   # Type checking
   pnpm compile

   # Testing
   pnpm test              # Run all tests once
   pnpm test:watch        # Run tests in watch mode
   pnpm test:ui           # Run tests with UI
   pnpm test:coverage     # Run tests with coverage report

   # Code Quality
   pnpm lint              # Check for linting errors
   pnpm lint:fix          # Fix linting errors automatically
   pnpm format            # Format code with Prettier
   pnpm format:check      # Check if code is formatted

   # API Code Generation
   pnpm generate:api      # Generate API types and hooks from OpenAPI schema
   ```

4. **Demo Login Credentials**

   When the application starts, navigate to `http://localhost:5173` (or the port shown in terminal) and use the following credentials to log in:
   - **Password:** `password`

   > **Note:** This is the only valid password for the demo API. Any other password will result in a 401 authentication error.

## ğŸ—ºï¸ Application Routes

| Route                    | Path                   | Description                    | Auth Required |
| ------------------------ | ---------------------- | ------------------------------ | ------------- |
| **Top Page**             | `/`                    | Login page with password input | No            |
| **My Page**              | `/myPage`              | Dashboard with health metrics  | Yes           |
| **Authentication Error** | `/authenticationError` | Displayed when auth fails      | No            |
| **Not Found**            | `*` (catch-all)        | 404 page for invalid routes    | No            |

### Route Behavior

- **Unauthenticated users** on `/myPage` â†’ Redirected to `/authenticationError`
- **Authenticated users** on `/` â†’ Redirected to `/myPage`
- **Header** only shows on authenticated routes
- **Footer** and **ScrollToTop** button visible on all routes

## ğŸŒ API Integration

- **Base URL:** `https://health_app_api.dev-arent.workers.dev`
- **OpenAPI Schema:** Available at `/openapi` endpoint
- **Authentication:** Password-based with JWT Bearer token
- **Token Storage:** localStorage with automatic injection via Axios interceptor
- **Data Fetching:** React Query v5 with custom hooks
- **Type Generation:** Orval for TypeScript types, Zod schemas, and MSW handlers
- **Error Handling:** Automatic 401 handling with redirect to auth error page

### Available API Hooks

| Hook                         | Endpoint                    | Purpose                               |
| ---------------------------- | --------------------------- | ------------------------------------- |
| `useAuthMutation()`          | `POST /signUp`              | Login and store JWT token             |
| `useTokenValidation()`       | `GET /validateToken`        | Validate current JWT token            |
| `useAchievement()`           | `GET /myData/achievement`   | Get today's achievement percentage    |
| `useNotifications()`         | `GET /myData/notification`  | Get notifications with pagination     |
| `useMealRecords()`           | `GET /myData/record/meals`  | Get meal records with infinite scroll |
| `useHealthRecords(duration)` | `GET /myData/record/health` | Get health records by duration        |

> **ğŸ“š Full API Documentation:** See [`/src/api/README.md`](./src/api/README.md) for complete integration guide, request/response examples, and testing strategies.

## ğŸ“± Responsive Design

### Breakpoints (defined in `src/styles/theme.ts`)

- **Mobile:** `415px` - Minimum viewport width
- **Tablet:** `851px` - Intermediate breakpoint
- **Desktop:** `1440px` - Maximum content width

### Design Principles

- Flexible layouts that adapt smoothly between breakpoints
- No horizontal scrolling at any viewport size
- Touch-friendly interface with minimum 44px touch targets
- Elements remain within viewport without overflow
- Images and content scale appropriately

## ğŸ¨ Design System

### Typography

#### Fonts

- Japanese: Noto Sans JP (Regular 400, Bold 700)
- Latin/Numbers: Inter (Regular 400, Bold 700)

#### Base Font Size

- Root font size is set to 62.5% (10px base)
- All typography uses rem units (1rem = 10px)

#### Type Scale

All sizes are in rem units for better accessibility and responsive design.

##### Headings

- **H1**: 5.6rem/6.4rem (56px/64px)
- **H2**: 4.8rem/5.6rem (48px/56px)
- **H3**: 4.0rem/4.8rem (40px/48px)
- **H4**: 3.2rem/4.0rem (32px/40px)
- **H5**: 2.4rem/3.2rem (24px/32px)

##### Paragraphs

- **P1**: 2.0rem/2.4rem (20px/24px)
- **P2**: 1.8rem/2.6rem (18px/26px)
- **P3**: 1.6rem/2.4rem (16px/24px)
- **P4**: 1.4rem/2.0rem (14px/20px)
- **P5**: 1.2rem/1.8rem (12px/18px)
- **P6**: 1.0rem/1.4rem (10px/14px)
- **P7**: 0.8rem/1.2rem (8px/12px)

#### Usage Example

```typescript
import styled from 'styled-components';

const Title = styled.h1`
  ${({ theme }) => theme.typography.h1.bold}
  font-family: ${({ theme }) => theme.fonts.alphanumeric};
`;

const JapaneseText = styled.p`
  ${({ theme }) => theme.typography.p2.regular}
  font-family: ${({ theme }) => theme.fonts.japanese};
`;
```

### Assets

- SVG format for project assets
- URL-based images from API responses

## ğŸ§ª Testing Strategy

### Test Types

- **Unit Tests:** Utilities, hooks, and isolated functions
- **Component Tests:** Individual components with React Testing Library
- **Integration Tests:** Full page flows and user interactions
- **API Mocking:** MSW (Mock Service Worker) for realistic API testing

### Testing Tools

- **Framework:** Vitest v3 with jsdom environment
- **Library:** React Testing Library v16
- **User Interactions:** @testing-library/user-event (always prefer over fireEvent)
- **Matchers:** @testing-library/jest-dom
- **Coverage:** @vitest/coverage-v8
- **API Mocking:** MSW v2 with auto-generated handlers

### Coverage Requirements

- **Minimum:** 80% coverage across all metrics
- **Metrics:** Lines, Functions, Branches, and Statements
- **Reports:** HTML coverage reports generated in `/coverage` directory

### Running Tests

```bash
pnpm test              # Run all tests once
pnpm test:watch        # Interactive watch mode
pnpm test:ui           # Visual test UI interface
pnpm test:coverage     # Generate coverage report
```

## ğŸ”’ Authentication Flow

### Login Process

1. **User visits Top Page (`/`)** â†’ Login form displayed
2. **User enters password** â†’ Form validation with Zod schema
3. **Submit form** â†’ `useAuthMutation()` calls `POST /signUp`
4. **API returns JWT token** â†’ Token stored in localStorage
5. **Axios interceptor** â†’ Automatically adds `Authorization: Bearer {token}` to all requests
6. **Redirect to `/myPage`** â†’ Dashboard loads with user data

### Protected Routes

- Routes check authentication status using `useAuth()` hook from `AuthContext`
- Unauthenticated users accessing protected routes â†’ Redirect to `/authenticationError`
- Authentication state persists across page refreshes via localStorage

### Token Management

- **Storage:** localStorage with key `authToken`
- **Injection:** Axios request interceptor adds token to all API calls
- **Validation:** Token validated on mount and protected route access
- **Expiration:** 401 responses clear token and redirect to auth error page
- **Logout:** Clears token from localStorage and redirects to `/`

### Test Credentials

- **Correct Password:** `"password"` â†’ Returns valid JWT token
- **Any other password** â†’ Returns 401 error

## ğŸ”’ Security Considerations

- JWT token-based authentication
- Automatic token injection via interceptors
- Protected routes with authentication guards
- Input validation with Zod schemas
- Secure token storage in localStorage
- Automatic cleanup on logout
- 401 error handling with auto-redirect

## ğŸ“ Development Guidelines

1. Follow TypeScript best practices
2. Write tests for new features
3. Maintain responsive design principles
4. Keep accessibility in mind
5. Document new components and utilities
6. Follow ESLint and Prettier rules

## ğŸ¤ Contributing

1. Branch naming: `feature/`, `bugfix/`, `hotfix/`
2. Commit messages: Follow conventional commits
3. PR template: Include description, testing steps, and screenshots
4. Code review: Required before merge
